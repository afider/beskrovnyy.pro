---
import BaseLayout from '@layouts/BaseLayout.astro';
import ImgSource from '@components/ImgSource.astro';
import { getImageUrl } from '@utils/GetImageUrl.astro';
import { Sprite } from 'astro-icon';

const { frontmatter } = Astro.props;
const coverImage = getImageUrl(frontmatter.coverImage);
const coverImageAlt = frontmatter.coverImageAlt;
const telegramPostUrl = 'beskrovnyy_pro/' + frontmatter.channelPostUrlId
---
<BaseLayout>
    <header id="home" class="article__header">
      <picture class="article__cover-pic">
        {
          coverImage && (
            <ImgSource img={coverImage} imgAlt={coverImageAlt} classNames="article__cover" />
          )
        }
      </picture>
      <div class="article__main-tags tags tags--detail">
        <div class="tags__title">üè∑Ô∏è</div>
        <ul class="tags__list">
          {frontmatter.tags.map((tag) => (
            <li class={`tags__item tag-item ${(tag === '—Å—Ç–∞—Ä–æ–µ') ? ('tag-item--old') : ''}`}><a href={`/tags/${tag}`} class="tag-item__link link link--nav">{tag}</a></li>
          ))}
        </ul>
      </div>

      <h1 class="article__title title title--h1" data-anchor>
        <span class="title__text"set:html={frontmatter.title}></span>&nbsp;<span class="title__control">&nbsp;<a class="title__link link link--nav" href="#home"><Sprite class="title__icon" name="chain" aria-hidden="true" /></a></span></h2>
      </h1>
      <p class="article__date">üìÖ&nbsp;<span class="sr-only">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ:</span> {frontmatter.dateUX}</p>

      {frontmatter.isOld && (<div class="article__disclamer disclamer">
        <p class="text">–≠—Ç–æ <a class="link link--info" href={frontmatter.archiveUrl}>—Å—Ç–∞—Ç—å—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –±–ª–æ–≥–∞</a>, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ <a class="link link--info" href="http://web.archive.org/web/20130111055319/http://www.beskrovnyy.com/" class="link">archive.org</a>. –í—Å–µ —Å—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ –ø–æ–º–µ—á–µ–Ω—ã —Ç–µ–≥–æ–º <span class="tag-item"><a href="/tags/—Å—Ç–∞—Ä–æ–µ" class="tag-item__link link link--nav">üö®&nbsp;—Å—Ç–∞—Ä–æ–µ</a></span></p>
      </div>)}
    </header>
    <slot />
    {frontmatter.channelPostUrlId && (
      <noindex>
        <section class="section" aria-hidden="true">
          <h2 id="comments" class="article__title title">üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
          <p class="article__text">–ú–æ–∂–Ω–æ –ø—Ä–æ–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å <a class="link link--info" href={`https://t.me/beskrovnyy_pro/${frontmatter.channelPostUrlId}`}>—ç—Ç–æ—Ç –ø–æ—Å—Ç –ø—Ä—è–º–æ –≤&nbsp;Telegram-–∫–∞–Ω–∞–ª–µ</a> –±–ª–æ–≥–∞, –ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –≤&nbsp;Telegram –∑–¥–µ—Å—å –Ω–µ&nbsp;–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å—Ä–∞–∑—É&nbsp;–∂–µ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∏–∂–µ:</p>
          <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-discussion={telegramPostUrl} data-comments-limit="10" data-colorful="1" data-dark="1"></script>
        </section>
      </noindex>
    )}
</BaseLayout>