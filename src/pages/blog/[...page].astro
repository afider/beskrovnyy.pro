---
// Welcome to Astro! Everything between these triple-dash code fences
// is your "component frontmatter". It never runs in the browser.

import BaseLayoutCardsList from '@layouts/BaseLayoutCardsList.astro';
import BlogPostCard from '@components/BlogPostCard.astro';
import TagsList from '@components/TagsList.astro';
import Pagination from '@components/Pagination.astro';
import { getImageUrl } from '@utils/GetImageUrl.astro';

const allPosts = await Astro.glob('../blog/*.mdx');
const postsPerPage = 4;

export async function getStaticPaths({paginate}) {
  const postsPerPage = 4;
  const allPosts = await Astro.glob('../blog/*.mdx');
  const formattedPosts = allPosts.sort((a, b) => Date.parse(b.frontmatter.date) - Date.parse(a.frontmatter.date));

  return paginate(formattedPosts, {
    pageSize: postsPerPage
  });
}

const {page} = Astro.props;
const pathname = new URL(Astro.request.url).pathname.split('/');
const firstPath = pathname[1];
const pageTitle = "–ë–ª–æ–≥";
---

<BaseLayoutCardsList title={pageTitle}>

  <h1 class="article__title title title--h1">üìù –°—Ç–∞—Ç—å–∏ –æ –≤–µ–±-—Ä–∞–∑—Ä–∞–±—Ç–∫–µ, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö –∏ –∂–∏–∑–Ω–∏</h1>

  <div class="article__content">
    <p>–ë–ª–æ–≥ —è –Ω–∞—á–∞–ª –≤–µ—Å—Ç–∏ –µ—â–µ –≤ –Ω–∞—á–∞–ª–µ 2011 –≥–æ–¥–∞, —É—Å–ø–µ—à–Ω–æ –≤–µ–ª –µ–≥–æ —Ü–µ–ª—ã–µ –¥–≤–∞ –≥–æ–¥–∞ üòÑ, –Ω–æ –≤ –∫–æ–Ω—Ü–µ 2012 –∑–∞–±—Ä–æ—Å–∏–ª. –≠—Ç–æ—Ç –±–ª–æ–≥ ‚Äî –≤—Ç–æ—Ä–∞—è —Ä–µ–∏–Ω–∫–∞—Ä–Ω–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é —è –∑–∞–¥–∏–∑–∞–π–Ω–∏–ª, —Å–≤–µ—Ä—Å—Ç–∞–ª –∏ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–ª –Ω–∞ Astro.js üöÄ –≤ 2024 –≥–æ–¥—É. –°—Ç–∞—Ä—ã–π –±–ª–æ–≥ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ <a class="link link--info" href="http://web.archive.org/web/20130111055319/http://www.beskrovnyy.com/" class="link">archive.org</a>.</p>
    <p>–í—Å–µ —Å—Ç–∞—Ç—å–∏, –∫–æ—Ç–æ—Ä—ã–µ —è –ø–∏—Å–∞–ª —Ç–æ–≥–¥–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –≤ –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–º –≤–∏–¥–µ —Å–æ –≤—Å–µ–º–∏ –æ–±–æ—Ä–æ—Ç–∞–º–∏, —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –º–Ω–µ —Ç–æ–≥–¥–∞. –°–≤–æ–µ–≥–æ —Ä–æ–¥–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –ø–∞–º—è—Ç–Ω–∏–∫ –º–æ–∏—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏–π –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏. –°—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ –±—É–¥—É—Ç –ø–æ–º–µ—á–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Ç–µ–≥–æ–º ¬´üö® —Å—Ç–∞—Ä–æ–µ¬ª. –í –∫–∞–∂–¥–æ–π —Ç–∞–∫–æ–π —Å—Ç–∞—Ç—å–µ –±—É–¥–µ—Ç —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –∏–∑ –≤–µ–±-–∞—Ä—Ö–∏–≤–∞.</p>
  </div>

  <aside class="article__aside aside">
    <h2 class="aside__title">üè∑Ô∏è –í—Å–µ —Ç–µ–≥–∏</h2>
    <div class="aside__body">
      <TagsList />
    </div>
  </aside>

  <div class="article__aside aside">
    <h2 class="aside__title">üìö –í—Å–µ —Å—Ç–∞—Ç—å–∏</h2>
    <div class="aside__body">
      <div class="cards-grid">
        <ul class="cards-grid__list">
          {
            page.data.map((post) => 
              <li class="cards-grid__item">
                  <BlogPostCard 
                    url={post.url} 
                    title={post.frontmatter.title} 
                    date={post.frontmatter.date} 
                    dateUX={post.frontmatter.dateUX} 
                    description={post.frontmatter.description}
                    img={getImageUrl(post.frontmatter.coverImage)}
                  />
              </li>
            )
          }
        </ul>
      </div>
    </div>
  </div>

  {allPosts.length > postsPerPage ? (
    <Pagination length={page.lastPage} 
      currentUrl={page.url.current} 
      currentPage={page.currentPage} 
      firstUrl={`/${firstPath}`} 
      prevUrl={page.url.prev} 
      nextUrl={page.url.next} 
      lastUrl={`/${firstPath}/${page.lastPage}`}
    />
  ) : null}

  <br>
  <br>
  <br>

</BaseLayoutCardsList>
